package darksky

import (
	"encoding/json"
	"testing"
	"time"
)

var (
	exampleJSON = []byte(`
	{"latitude":37.8267,"longitude":-122.4233,"timezone":"America/Los_Angeles","currently":{"time":1551886726,"summary":"Mostly Cloudy","icon":"partly-cloudy-day","nearestStormDistance":0,"precipIntensity":0,"precipProbability":0,"temperature":55.09,"apparentTemperature":55.09,"dewPoint":50.97,"humidity":0.86,"pressure":1003.16,"windSpeed":10.93,"windGust":18.43,"windBearing":205,"cloudCover":0.79,"uvIndex":0,"visibility":6.9,"ozone":353.42},"minutely":{"summary":"Mostly cloudy for the hour.","icon":"partly-cloudy-day","data":[{"time":1551886680,"precipIntensity":0,"precipProbability":0},{"time":1551886740,"precipIntensity":0,"precipProbability":0},{"time":1551886800,"precipIntensity":0,"precipProbability":0},{"time":1551886860,"precipIntensity":0,"precipProbability":0},{"time":1551886920,"precipIntensity":0,"precipProbability":0},{"time":1551886980,"precipIntensity":0,"precipProbability":0},{"time":1551887040,"precipIntensity":0,"precipProbability":0},{"time":1551887100,"precipIntensity":0,"precipProbability":0},{"time":1551887160,"precipIntensity":0,"precipProbability":0},{"time":1551887220,"precipIntensity":0,"precipProbability":0},{"time":1551887280,"precipIntensity":0,"precipProbability":0},{"time":1551887340,"precipIntensity":0,"precipProbability":0},{"time":1551887400,"precipIntensity":0,"precipProbability":0},{"time":1551887460,"precipIntensity":0,"precipProbability":0},{"time":1551887520,"precipIntensity":0,"precipProbability":0},{"time":1551887580,"precipIntensity":0,"precipProbability":0},{"time":1551887640,"precipIntensity":0,"precipProbability":0},{"time":1551887700,"precipIntensity":0,"precipProbability":0},{"time":1551887760,"precipIntensity":0,"precipProbability":0},{"time":1551887820,"precipIntensity":0,"precipProbability":0},{"time":1551887880,"precipIntensity":0,"precipProbability":0},{"time":1551887940,"precipIntensity":0,"precipProbability":0},{"time":1551888000,"precipIntensity":0,"precipProbability":0},{"time":1551888060,"precipIntensity":0,"precipProbability":0},{"time":1551888120,"precipIntensity":0,"precipProbability":0},{"time":1551888180,"precipIntensity":0,"precipProbability":0},{"time":1551888240,"precipIntensity":0,"precipProbability":0},{"time":1551888300,"precipIntensity":0,"precipProbability":0},{"time":1551888360,"precipIntensity":0,"precipProbability":0},{"time":1551888420,"precipIntensity":0,"precipProbability":0},{"time":1551888480,"precipIntensity":0,"precipProbability":0},{"time":1551888540,"precipIntensity":0,"precipProbability":0},{"time":1551888600,"precipIntensity":0,"precipProbability":0},{"time":1551888660,"precipIntensity":0,"precipProbability":0},{"time":1551888720,"precipIntensity":0,"precipProbability":0},{"time":1551888780,"precipIntensity":0,"precipProbability":0},{"time":1551888840,"precipIntensity":0,"precipProbability":0},{"time":1551888900,"precipIntensity":0,"precipProbability":0},{"time":1551888960,"precipIntensity":0,"precipProbability":0},{"time":1551889020,"precipIntensity":0,"precipProbability":0},{"time":1551889080,"precipIntensity":0,"precipProbability":0},{"time":1551889140,"precipIntensity":0,"precipProbability":0},{"time":1551889200,"precipIntensity":0,"precipProbability":0},{"time":1551889260,"precipIntensity":0,"precipProbability":0},{"time":1551889320,"precipIntensity":0,"precipProbability":0},{"time":1551889380,"precipIntensity":0,"precipProbability":0},{"time":1551889440,"precipIntensity":0,"precipProbability":0},{"time":1551889500,"precipIntensity":0,"precipProbability":0},{"time":1551889560,"precipIntensity":0,"precipProbability":0},{"time":1551889620,"precipIntensity":0,"precipProbability":0},{"time":1551889680,"precipIntensity":0,"precipProbability":0},{"time":1551889740,"precipIntensity":0,"precipProbability":0},{"time":1551889800,"precipIntensity":0,"precipProbability":0},{"time":1551889860,"precipIntensity":0,"precipProbability":0},{"time":1551889920,"precipIntensity":0,"precipProbability":0},{"time":1551889980,"precipIntensity":0,"precipProbability":0},{"time":1551890040,"precipIntensity":0,"precipProbability":0},{"time":1551890100,"precipIntensity":0,"precipProbability":0},{"time":1551890160,"precipIntensity":0,"precipProbability":0},{"time":1551890220,"precipIntensity":0,"precipProbability":0},{"time":1551890280,"precipIntensity":0,"precipProbability":0}]},"hourly":{"summary":"Mostly cloudy throughout the day and breezy until this afternoon.","icon":"wind","data":[{"time":1551884400,"summary":"Rain","icon":"rain","precipIntensity":0.0583,"precipProbability":0.98,"precipType":"rain","temperature":54.92,"apparentTemperature":54.92,"dewPoint":51.07,"humidity":0.87,"pressure":1002.53,"windSpeed":10.72,"windGust":18.81,"windBearing":202,"cloudCover":0.83,"uvIndex":0,"visibility":6.22,"ozone":354.65},{"time":1551888000,"summary":"Mostly Cloudy","icon":"partly-cloudy-day","precipIntensity":0.0069,"precipProbability":0.93,"precipType":"rain","temperature":55.18,"apparentTemperature":55.18,"dewPoint":50.91,"humidity":0.86,"pressure":1003.5,"windSpeed":11.05,"windGust":18.23,"windBearing":207,"cloudCover":0.77,"uvIndex":0,"visibility":7.28,"ozone":352.74},{"time":1551891600,"summary":"Light Rain","icon":"rain","precipIntensity":0.023,"precipProbability":0.75,"precipType":"rain","temperature":55.2,"apparentTemperature":55.2,"dewPoint":51.3,"humidity":0.87,"pressure":1004.5,"windSpeed":13.74,"windGust":22.81,"windBearing":207,"cloudCover":0.76,"uvIndex":1,"visibility":8.57,"ozone":350.54},{"time":1551895200,"summary":"Breezy and Mostly Cloudy","icon":"wind","precipIntensity":0.0138,"precipProbability":0.62,"precipType":"rain","temperature":54.95,"apparentTemperature":54.95,"dewPoint":51.26,"humidity":0.87,"pressure":1005.43,"windSpeed":15.82,"windGust":26.1,"windBearing":208,"cloudCover":0.75,"uvIndex":2,"visibility":9.41,"ozone":347.77},{"time":1551898800,"summary":"Breezy and Mostly Cloudy","icon":"wind","precipIntensity":0.0088,"precipProbability":0.58,"precipType":"rain","temperature":54.58,"apparentTemperature":54.58,"dewPoint":50.42,"humidity":0.86,"pressure":1005.87,"windSpeed":16.27,"windGust":25.64,"windBearing":211,"cloudCover":0.62,"uvIndex":3,"visibility":10,"ozone":343.31},{"time":1551902400,"summary":"Breezy and Mostly Cloudy","icon":"wind","precipIntensity":0.0072,"precipProbability":0.58,"precipType":"rain","temperature":54.01,"apparentTemperature":54.01,"dewPoint":49.57,"humidity":0.85,"pressure":1006.21,"windSpeed":17,"windGust":26.42,"windBearing":210,"cloudCover":0.69,"uvIndex":4,"visibility":10,"ozone":338.21},{"time":1551906000,"summary":"Breezy and Mostly Cloudy","icon":"wind","precipIntensity":0.0059,"precipProbability":0.57,"precipType":"rain","temperature":53.41,"apparentTemperature":53.41,"dewPoint":48.95,"humidity":0.85,"pressure":1006.36,"windSpeed":17.36,"windGust":27.56,"windBearing":212,"cloudCover":0.77,"uvIndex":3,"visibility":10,"ozone":335.66},{"time":1551909600,"summary":"Breezy and Mostly Cloudy","icon":"wind","precipIntensity":0.006,"precipProbability":0.55,"precipType":"rain","temperature":53.31,"apparentTemperature":53.31,"dewPoint":48.71,"humidity":0.84,"pressure":1006.77,"windSpeed":17.54,"windGust":29.09,"windBearing":210,"cloudCover":0.7,"uvIndex":3,"visibility":10,"ozone":337.12},{"time":1551913200,"summary":"Mostly Cloudy","icon":"partly-cloudy-day","precipIntensity":0.0038,"precipProbability":0.41,"precipType":"rain","temperature":53.42,"apparentTemperature":53.42,"dewPoint":48.6,"humidity":0.84,"pressure":1007.06,"windSpeed":17.51,"windGust":30.42,"windBearing":208,"cloudCover":0.75,"uvIndex":2,"visibility":10,"ozone":340.86},{"time":1551916800,"summary":"Mostly Cloudy","icon":"partly-cloudy-day","precipIntensity":0.014,"precipProbability":0.55,"precipType":"rain","temperature":53.38,"apparentTemperature":53.38,"dewPoint":48.7,"humidity":0.84,"pressure":1007.54,"windSpeed":17.31,"windGust":31.32,"windBearing":204,"cloudCover":0.82,"uvIndex":1,"visibility":9.58,"ozone":345.03},{"time":1551920400,"summary":"Mostly Cloudy","icon":"partly-cloudy-day","precipIntensity":0.0082,"precipProbability":0.44,"precipType":"rain","temperature":53.21,"apparentTemperature":53.21,"dewPoint":49.07,"humidity":0.86,"pressure":1008.04,"windSpeed":16.56,"windGust":29.83,"windBearing":200,"cloudCover":0.85,"uvIndex":0,"visibility":9.86,"ozone":349.94},{"time":1551924000,"summary":"Mostly Cloudy","icon":"partly-cloudy-day","precipIntensity":0.0143,"precipProbability":0.51,"precipType":"rain","temperature":52.9,"apparentTemperature":52.9,"dewPoint":49.71,"humidity":0.89,"pressure":1008.63,"windSpeed":15.05,"windGust":26.03,"windBearing":223,"cloudCover":0.89,"uvIndex":0,"visibility":9.25,"ozone":355.11},{"time":1551927600,"summary":"Mostly Cloudy","icon":"partly-cloudy-night","precipIntensity":0.0174,"precipProbability":0.58,"precipType":"rain","temperature":52.74,"apparentTemperature":52.74,"dewPoint":50.04,"humidity":0.91,"pressure":1009.34,"windSpeed":13.76,"windGust":22.94,"windBearing":231,"cloudCover":0.9,"uvIndex":0,"visibility":9.31,"ozone":357.55},{"time":1551931200,"summary":"Mostly Cloudy","icon":"partly-cloudy-night","precipIntensity":0.0134,"precipProbability":0.59,"precipType":"rain","temperature":52.59,"apparentTemperature":52.59,"dewPoint":50.06,"humidity":0.91,"pressure":1010.51,"windSpeed":12.27,"windGust":20.45,"windBearing":226,"cloudCover":0.88,"uvIndex":0,"visibility":9.04,"ozone":354.79},{"time":1551934800,"summary":"Overcast","icon":"cloudy","precipIntensity":0.0064,"precipProbability":0.5,"precipType":"rain","temperature":52.5,"apparentTemperature":52.5,"dewPoint":49.43,"humidity":0.89,"pressure":1011.68,"windSpeed":11.28,"windGust":19.87,"windBearing":257,"cloudCover":0.95,"uvIndex":0,"visibility":10,"ozone":349.27},{"time":1551938400,"summary":"Overcast","icon":"cloudy","precipIntensity":0.0028,"precipProbability":0.34,"precipType":"rain","temperature":52.34,"apparentTemperature":52.34,"dewPoint":49,"humidity":0.88,"pressure":1012.86,"windSpeed":10.66,"windGust":18.78,"windBearing":256,"cloudCover":0.95,"uvIndex":0,"visibility":10,"ozone":345.09},{"time":1551942000,"summary":"Overcast","icon":"cloudy","precipIntensity":0.0021,"precipProbability":0.28,"precipType":"rain","temperature":51.98,"apparentTemperature":51.98,"dewPoint":48.6,"humidity":0.88,"pressure":1013.6,"windSpeed":9.5,"windGust":17.52,"windBearing":267,"cloudCover":0.94,"uvIndex":0,"visibility":10,"ozone":344.11},{"time":1551945600,"summary":"Mostly Cloudy","icon":"partly-cloudy-night","precipIntensity":0.0033,"precipProbability":0.33,"precipType":"rain","temperature":51.55,"apparentTemperature":51.55,"dewPoint":48.17,"humidity":0.88,"pressure":1014.09,"windSpeed":9.58,"windGust":16.34,"windBearing":252,"cloudCover":0.92,"uvIndex":0,"visibility":10,"ozone":344.52},{"time":1551949200,"summary":"Mostly Cloudy","icon":"partly-cloudy-night","precipIntensity":0.0053,"precipProbability":0.32,"precipType":"rain","temperature":51.12,"apparentTemperature":51.12,"dewPoint":47.7,"humidity":0.88,"pressure":1014.54,"windSpeed":9.29,"windGust":15.32,"windBearing":256,"cloudCover":0.89,"uvIndex":0,"visibility":10,"ozone":344.92},{"time":1551952800,"summary":"Mostly Cloudy","icon":"partly-cloudy-night","precipIntensity":0.0061,"precipProbability":0.3,"precipType":"rain","temperature":50.74,"apparentTemperature":50.74,"dewPoint":47.19,"humidity":0.88,"pressure":1014.99,"windSpeed":8.87,"windGust":14.62,"windBearing":226,"cloudCover":0.85,"uvIndex":0,"visibility":10,"ozone":344.99},{"time":1551956400,"summary":"Mostly Cloudy","icon":"partly-cloudy-night","precipIntensity":0.0069,"precipProbability":0.33,"precipType":"rain","temperature":50.27,"apparentTemperature":50.27,"dewPoint":46.63,"humidity":0.87,"pressure":1015.38,"windSpeed":7.42,"windGust":14.08,"windBearing":318,"cloudCover":0.79,"uvIndex":0,"visibility":10,"ozone":345.07},{"time":1551960000,"summary":"Mostly Cloudy","icon":"partly-cloudy-night","precipIntensity":0.0078,"precipProbability":0.38,"precipType":"rain","temperature":49.78,"apparentTemperature":45.97,"dewPoint":45.98,"humidity":0.87,"pressure":1015.75,"windSpeed":9.4,"windGust":13.48,"windBearing":276,"cloudCover":0.76,"uvIndex":0,"visibility":10,"ozone":344.73},{"time":1551963600,"summary":"Mostly Cloudy","icon":"partly-cloudy-night","precipIntensity":0.008,"precipProbability":0.43,"precipType":"rain","temperature":48.87,"apparentTemperature":45.23,"dewPoint":45.2,"humidity":0.87,"pressure":1016.06,"windSpeed":8.39,"windGust":12.74,"windBearing":251,"cloudCover":0.78,"uvIndex":0,"visibility":10,"ozone":343.35},{"time":1551967200,"summary":"Mostly Cloudy","icon":"partly-cloudy-night","precipIntensity":0.0078,"precipProbability":0.42,"precipType":"rain","temperature":48.02,"apparentTemperature":44.33,"dewPoint":44.33,"humidity":0.87,"pressure":1016.35,"windSpeed":8.05,"windGust":12,"windBearing":304,"cloudCover":0.81,"uvIndex":0,"visibility":10,"ozone":341.56},{"time":1551970800,"summary":"Mostly Cloudy","icon":"partly-cloudy-day","precipIntensity":0.0072,"precipProbability":0.38,"precipType":"rain","temperature":47.64,"apparentTemperature":43.87,"dewPoint":43.48,"humidity":0.85,"pressure":1016.7,"windSpeed":8.06,"windGust":11.29,"windBearing":290,"cloudCover":0.85,"uvIndex":0,"visibility":10,"ozone":340.98},{"time":1551974400,"summary":"Mostly Cloudy","icon":"partly-cloudy-day","precipIntensity":0.0062,"precipProbability":0.23,"precipType":"rain","temperature":48.06,"apparentTemperature":44.55,"dewPoint":42.65,"humidity":0.81,"pressure":1017.24,"windSpeed":7.65,"windGust":10.45,"windBearing":287,"cloudCover":0.86,"uvIndex":0,"visibility":10,"ozone":342.42},{"time":1551978000,"summary":"Mostly Cloudy","icon":"partly-cloudy-day","precipIntensity":0.0052,"precipProbability":0.18,"precipType":"rain","temperature":49.22,"apparentTemperature":46.08,"dewPoint":41.85,"humidity":0.76,"pressure":1017.86,"windSpeed":7.37,"windGust":9.55,"windBearing":286,"cloudCover":0.88,"uvIndex":1,"visibility":10,"ozone":344.97},{"time":1551981600,"summary":"Mostly Cloudy","icon":"partly-cloudy-day","precipIntensity":0.0039,"precipProbability":0.13,"precipType":"rain","temperature":50.39,"apparentTemperature":50.39,"dewPoint":41.2,"humidity":0.71,"pressure":1018.25,"windSpeed":7.3,"windGust":8.97,"windBearing":292,"cloudCover":0.9,"uvIndex":2,"visibility":10,"ozone":347.63},{"time":1551985200,"summary":"Mostly Cloudy","icon":"partly-cloudy-day","precipIntensity":0.0018,"precipProbability":0.09,"precipType":"rain","temperature":51.36,"apparentTemperature":51.36,"dewPoint":40.77,"humidity":0.67,"pressure":1018.26,"windSpeed":7.23,"windGust":8.99,"windBearing":328,"cloudCover":0.93,"uvIndex":3,"visibility":10,"ozone":350.03},{"time":1551988800,"summary":"Overcast","icon":"cloudy","precipIntensity":0.0003,"precipProbability":0.06,"precipType":"rain","temperature":51.99,"apparentTemperature":51.99,"dewPoint":40.47,"humidity":0.65,"pressure":1018.07,"windSpeed":7.87,"windGust":9.43,"windBearing":240,"cloudCover":0.97,"uvIndex":3,"visibility":10,"ozone":352.62},{"time":1551992400,"summary":"Overcast","icon":"cloudy","precipIntensity":0,"precipProbability":0,"temperature":52.19,"apparentTemperature":52.19,"dewPoint":40.16,"humidity":0.63,"pressure":1017.71,"windSpeed":8.68,"windGust":10.04,"windBearing":269,"cloudCover":1,"uvIndex":3,"visibility":10,"ozone":355.25},{"time":1551996000,"summary":"Overcast","icon":"cloudy","precipIntensity":0,"precipProbability":0,"temperature":51.96,"apparentTemperature":51.96,"dewPoint":39.7,"humidity":0.63,"pressure":1017.12,"windSpeed":9.41,"windGust":10.75,"windBearing":242,"cloudCover":1,"uvIndex":2,"visibility":10,"ozone":358.09},{"time":1551999600,"summary":"Overcast","icon":"cloudy","precipIntensity":0,"precipProbability":0,"temperature":51.41,"apparentTemperature":51.41,"dewPoint":39.21,"humidity":0.63,"pressure":1016.38,"windSpeed":10.05,"windGust":11.62,"windBearing":313,"cloudCover":1,"uvIndex":2,"visibility":10,"ozone":361.12},{"time":1552003200,"summary":"Overcast","icon":"cloudy","precipIntensity":0,"precipProbability":0,"temperature":50.74,"apparentTemperature":50.74,"dewPoint":38.81,"humidity":0.63,"pressure":1015.8,"windSpeed":11.04,"windGust":12.57,"windBearing":276,"cloudCover":1,"uvIndex":1,"visibility":10,"ozone":363.99},{"time":1552006800,"summary":"Overcast","icon":"cloudy","precipIntensity":0,"precipProbability":0,"temperature":50.21,"apparentTemperature":50.21,"dewPoint":38.62,"humidity":0.64,"pressure":1015.53,"windSpeed":9.24,"windGust":13.54,"windBearing":261,"cloudCover":0.98,"uvIndex":0,"visibility":10,"ozone":366.78},{"time":1552010400,"summary":"Overcast","icon":"cloudy","precipIntensity":0,"precipProbability":0,"temperature":49.39,"apparentTemperature":45.24,"dewPoint":38.56,"humidity":0.66,"pressure":1015.42,"windSpeed":10.1,"windGust":14.58,"windBearing":293,"cloudCover":0.96,"uvIndex":0,"visibility":10,"ozone":369.6},{"time":1552014000,"summary":"Mostly Cloudy","icon":"partly-cloudy-night","precipIntensity":0,"precipProbability":0,"temperature":48.77,"apparentTemperature":43.79,"dewPoint":38.55,"humidity":0.68,"pressure":1015.44,"windSpeed":12.29,"windGust":15.75,"windBearing":284,"cloudCover":0.93,"uvIndex":0,"visibility":10,"ozone":371.75},{"time":1552017600,"summary":"Mostly Cloudy","icon":"partly-cloudy-night","precipIntensity":0,"precipProbability":0,"temperature":48.47,"apparentTemperature":43.51,"dewPoint":38.72,"humidity":0.69,"pressure":1015.53,"windSpeed":11.97,"windGust":17.22,"windBearing":279,"cloudCover":0.87,"uvIndex":0,"visibility":10,"ozone":373.2},{"time":1552021200,"summary":"Mostly Cloudy","icon":"partly-cloudy-night","precipIntensity":0.0002,"precipProbability":0.03,"precipType":"rain","temperature":48.15,"apparentTemperature":42.78,"dewPoint":38.98,"humidity":0.7,"pressure":1015.73,"windSpeed":13.11,"windGust":18.84,"windBearing":298,"cloudCover":0.8,"uvIndex":0,"visibility":10,"ozone":374.05},{"time":1552024800,"summary":"Mostly Cloudy","icon":"partly-cloudy-night","precipIntensity":0.0004,"precipProbability":0.03,"precipType":"rain","temperature":47.75,"apparentTemperature":42.07,"dewPoint":39.08,"humidity":0.72,"pressure":1015.9,"windSpeed":13.84,"windGust":20.19,"windBearing":293,"cloudCover":0.75,"uvIndex":0,"visibility":10,"ozone":374.36},{"time":1552028400,"summary":"Mostly Cloudy","icon":"partly-cloudy-night","precipIntensity":0.0003,"precipProbability":0.03,"precipType":"rain","temperature":47.59,"apparentTemperature":41.83,"dewPoint":38.9,"humidity":0.72,"pressure":1016.07,"windSpeed":13.97,"windGust":21.02,"windBearing":293,"cloudCover":0.7,"uvIndex":0,"visibility":10,"ozone":373.54},{"time":1552032000,"summary":"Mostly Cloudy","icon":"partly-cloudy-night","precipIntensity":0,"precipProbability":0,"temperature":47.66,"apparentTemperature":41.89,"dewPoint":38.55,"humidity":0.71,"pressure":1016.23,"windSpeed":14.06,"windGust":21.57,"windBearing":292,"cloudCover":0.65,"uvIndex":0,"visibility":10,"ozone":372.15},{"time":1552035600,"summary":"Mostly Cloudy","icon":"partly-cloudy-night","precipIntensity":0,"precipProbability":0,"temperature":47.8,"apparentTemperature":42.04,"dewPoint":38.2,"humidity":0.69,"pressure":1016.3,"windSpeed":14.2,"windGust":22.21,"windBearing":293,"cloudCover":0.6,"uvIndex":0,"visibility":10,"ozone":371.49},{"time":1552039200,"summary":"Partly Cloudy","icon":"partly-cloudy-night","precipIntensity":0,"precipProbability":0,"temperature":47.56,"apparentTemperature":41.66,"dewPoint":37.88,"humidity":0.69,"pressure":1016.14,"windSpeed":14.45,"windGust":23.12,"windBearing":296,"cloudCover":0.55,"uvIndex":0,"visibility":10,"ozone":371.44},{"time":1552042800,"summary":"Partly Cloudy","icon":"partly-cloudy-night","precipIntensity":0,"precipProbability":0,"temperature":47.28,"apparentTemperature":41.23,"dewPoint":37.58,"humidity":0.69,"pressure":1015.91,"windSpeed":14.75,"windGust":24.05,"windBearing":299,"cloudCover":0.51,"uvIndex":0,"visibility":10,"ozone":372.18},{"time":1552046400,"summary":"Partly Cloudy","icon":"partly-cloudy-night","precipIntensity":0,"precipProbability":0,"temperature":46.63,"apparentTemperature":40.35,"dewPoint":37.29,"humidity":0.7,"pressure":1015.91,"windSpeed":14.91,"windGust":24.63,"windBearing":302,"cloudCover":0.46,"uvIndex":0,"visibility":10,"ozone":375.33},{"time":1552050000,"summary":"Partly Cloudy","icon":"partly-cloudy-night","precipIntensity":0,"precipProbability":0,"temperature":45.93,"apparentTemperature":39.48,"dewPoint":36.97,"humidity":0.71,"pressure":1016.26,"windSpeed":14.8,"windGust":24.72,"windBearing":303,"cloudCover":0.37,"uvIndex":0,"visibility":10,"ozone":384.73},{"time":1552053600,"summary":"Partly Cloudy","icon":"partly-cloudy-night","precipIntensity":0.0002,"precipProbability":0.02,"precipType":"rain","temperature":45.27,"apparentTemperature":38.7,"dewPoint":36.64,"humidity":0.72,"pressure":1016.85,"windSpeed":14.6,"windGust":24.5,"windBearing":306,"cloudCover":0.27,"uvIndex":0,"visibility":10,"ozone":396.61},{"time":1552057200,"summary":"Clear","icon":"clear-day","precipIntensity":0.0004,"precipProbability":0.02,"precipType":"rain","temperature":45.42,"apparentTemperature":38.97,"dewPoint":36.47,"humidity":0.71,"pressure":1017.44,"windSpeed":14.27,"windGust":23.86,"windBearing":305,"cloudCover":0.2,"uvIndex":0,"visibility":10,"ozone":401.23}]},"daily":{"summary":"Light rain today through Tuesday, with high temperatures bottoming out at 52°F on Saturday.","icon":"rain","data":[{"time":1551859200,"summary":"Rain in the morning and breezy until afternoon.","icon":"rain","sunriseTime":1551882922,"sunsetTime":1551924558,"moonPhase":0.01,"precipIntensity":0.0237,"precipIntensityMax":0.0946,"precipIntensityMaxTime":1551877200,"precipProbability":1,"precipType":"rain","temperatureHigh":55.2,"temperatureHighTime":1551891600,"temperatureLow":47.64,"temperatureLowTime":1551970800,"apparentTemperatureHigh":55.2,"apparentTemperatureHighTime":1551891600,"apparentTemperatureLow":43.87,"apparentTemperatureLowTime":1551970800,"dewPoint":49.94,"humidity":0.85,"pressure":1006.1,"windSpeed":12.25,"windGust":35.74,"windGustTime":1551862800,"windBearing":204,"cloudCover":0.85,"uvIndex":4,"uvIndexTime":1551902400,"visibility":8.51,"ozone":352.09,"temperatureMin":51.98,"temperatureMinTime":1551942000,"temperatureMax":58.69,"temperatureMaxTime":1551862800,"apparentTemperatureMin":51.98,"apparentTemperatureMinTime":1551942000,"apparentTemperatureMax":58.69,"apparentTemperatureMaxTime":1551862800},{"time":1551945600,"summary":"Mostly cloudy throughout the day.","icon":"partly-cloudy-day","sunriseTime":1551969234,"sunsetTime":1552011017,"moonPhase":0.04,"precipIntensity":0.0029,"precipIntensityMax":0.008,"precipIntensityMaxTime":1551963600,"precipProbability":0.7,"precipType":"rain","temperatureHigh":52.19,"temperatureHighTime":1551992400,"temperatureLow":45.27,"temperatureLowTime":1552053600,"apparentTemperatureHigh":52.19,"apparentTemperatureHighTime":1551992400,"apparentTemperatureLow":38.7,"apparentTemperatureLowTime":1552053600,"dewPoint":41.87,"humidity":0.75,"pressure":1016.26,"windSpeed":8.78,"windGust":21.02,"windGustTime":1552028400,"windBearing":280,"cloudCover":0.88,"uvIndex":3,"uvIndexTime":1551985200,"visibility":10,"ozone":355.4,"temperatureMin":47.59,"temperatureMinTime":1552028400,"temperatureMax":52.19,"temperatureMaxTime":1551992400,"apparentTemperatureMin":41.83,"apparentTemperatureMinTime":1552028400,"apparentTemperatureMax":52.19,"apparentTemperatureMaxTime":1551992400},{"time":1552032000,"summary":"Mostly cloudy starting in the evening.","icon":"partly-cloudy-night","sunriseTime":1552055545,"sunsetTime":1552097475,"moonPhase":0.07,"precipIntensity":0.0004,"precipIntensityMax":0.0018,"precipIntensityMaxTime":1552078800,"precipProbability":0.14,"precipType":"rain","temperatureHigh":53.09,"temperatureHighTime":1552082400,"temperatureLow":45.97,"temperatureLowTime":1552140000,"apparentTemperatureHigh":53.09,"apparentTemperatureHighTime":1552082400,"apparentTemperatureLow":43.1,"apparentTemperatureLowTime":1552143600,"dewPoint":37.19,"humidity":0.64,"pressure":1018.3,"windSpeed":13.03,"windGust":24.72,"windGustTime":1552050000,"windBearing":294,"cloudCover":0.27,"uvIndex":5,"uvIndexTime":1552075200,"visibility":10,"ozone":345.7,"temperatureMin":45.27,"temperatureMinTime":1552053600,"temperatureMax":53.09,"temperatureMaxTime":1552082400,"apparentTemperatureMin":38.7,"apparentTemperatureMinTime":1552053600,"apparentTemperatureMax":53.09,"apparentTemperatureMaxTime":1552082400},{"time":1552118400,"summary":"Light rain in the evening.","icon":"rain","sunriseTime":1552141857,"sunsetTime":1552183932,"moonPhase":0.1,"precipIntensity":0.0087,"precipIntensityMax":0.0382,"precipIntensityMaxTime":1552186800,"precipProbability":0.81,"precipType":"rain","temperatureHigh":52.11,"temperatureHighTime":1552165200,"temperatureLow":43.72,"temperatureLowTime":1552226400,"apparentTemperatureHigh":52.11,"apparentTemperatureHighTime":1552165200,"apparentTemperatureLow":39.06,"apparentTemperatureLowTime":1552226400,"dewPoint":40.33,"humidity":0.73,"pressure":1016.79,"windSpeed":6.49,"windGust":17.17,"windGustTime":1552179600,"windBearing":180,"cloudCover":0.87,"uvIndex":4,"uvIndexTime":1552161600,"visibility":7.7,"ozone":348.34,"temperatureMin":45.97,"temperatureMinTime":1552140000,"temperatureMax":52.11,"temperatureMaxTime":1552165200,"apparentTemperatureMin":43.1,"apparentTemperatureMinTime":1552143600,"apparentTemperatureMax":52.11,"apparentTemperatureMaxTime":1552165200},{"time":1552204800,"summary":"Mostly cloudy throughout the day.","icon":"partly-cloudy-day","sunriseTime":1552228167,"sunsetTime":1552270389,"moonPhase":0.13,"precipIntensity":0.0005,"precipIntensityMax":0.0018,"precipIntensityMaxTime":1552204800,"precipProbability":0.34,"precipType":"rain","temperatureHigh":56.31,"temperatureHighTime":1552262400,"temperatureLow":47.18,"temperatureLowTime":1552312800,"apparentTemperatureHigh":56.31,"apparentTemperatureHighTime":1552262400,"apparentTemperatureLow":45.27,"apparentTemperatureLowTime":1552312800,"dewPoint":41.96,"humidity":0.75,"pressure":1013.67,"windSpeed":4.62,"windGust":16.71,"windGustTime":1552230000,"windBearing":28,"cloudCover":0.68,"uvIndex":3,"uvIndexTime":1552244400,"visibility":9.95,"ozone":374.14,"temperatureMin":43.72,"temperatureMinTime":1552226400,"temperatureMax":56.31,"temperatureMaxTime":1552262400,"apparentTemperatureMin":39.06,"apparentTemperatureMinTime":1552226400,"apparentTemperatureMax":56.31,"apparentTemperatureMaxTime":1552262400},{"time":1552287600,"summary":"Partly cloudy overnight.","icon":"partly-cloudy-night","sunriseTime":1552314481,"sunsetTime":1552356843,"moonPhase":0.16,"precipIntensity":0.0001,"precipIntensityMax":0.0002,"precipIntensityMaxTime":1552338000,"precipProbability":0.04,"precipType":"rain","temperatureHigh":60.72,"temperatureHighTime":1552341600,"temperatureLow":49.53,"temperatureLowTime":1552402800,"apparentTemperatureHigh":60.72,"apparentTemperatureHighTime":1552341600,"apparentTemperatureLow":46.28,"apparentTemperatureLowTime":1552402800,"dewPoint":39.41,"humidity":0.6,"pressure":1014.13,"windSpeed":4.23,"windGust":12.59,"windGustTime":1552352400,"windBearing":344,"cloudCover":0.16,"uvIndex":5,"uvIndexTime":1552334400,"visibility":9.96,"ozone":350.46,"temperatureMin":47.18,"temperatureMinTime":1552312800,"temperatureMax":60.72,"temperatureMaxTime":1552341600,"apparentTemperatureMin":45.27,"apparentTemperatureMinTime":1552312800,"apparentTemperatureMax":60.72,"apparentTemperatureMaxTime":1552341600},{"time":1552374000,"summary":"Mostly cloudy until evening and breezy overnight.","icon":"wind","sunriseTime":1552400790,"sunsetTime":1552443300,"moonPhase":0.2,"precipIntensity":0.0079,"precipIntensityMax":0.037,"precipIntensityMaxTime":1552413600,"precipProbability":0.69,"precipType":"rain","temperatureHigh":58.12,"temperatureHighTime":1552431600,"temperatureLow":48.3,"temperatureLowTime":1552485600,"apparentTemperatureHigh":58.12,"apparentTemperatureHighTime":1552431600,"apparentTemperatureLow":43.5,"apparentTemperatureLowTime":1552485600,"dewPoint":41.17,"humidity":0.63,"pressure":1015.41,"windSpeed":9.68,"windGust":37.4,"windGustTime":1552449600,"windBearing":290,"cloudCover":0.59,"uvIndex":4,"uvIndexTime":1552420800,"visibility":7.48,"ozone":318.34,"temperatureMin":49.53,"temperatureMinTime":1552402800,"temperatureMax":58.12,"temperatureMaxTime":1552431600,"apparentTemperatureMin":46.28,"apparentTemperatureMinTime":1552402800,"apparentTemperatureMax":58.12,"apparentTemperatureMaxTime":1552431600},{"time":1552460400,"summary":"Partly cloudy overnight.","icon":"partly-cloudy-night","sunriseTime":1552487100,"sunsetTime":1552529757,"moonPhase":0.23,"precipIntensity":0.0001,"precipIntensityMax":0.0003,"precipIntensityMaxTime":1552543200,"precipProbability":0.05,"precipType":"rain","temperatureHigh":58.59,"temperatureHighTime":1552518000,"temperatureLow":51.25,"temperatureLowTime":1552572000,"apparentTemperatureHigh":58.59,"apparentTemperatureHighTime":1552518000,"apparentTemperatureLow":51.25,"apparentTemperatureLowTime":1552572000,"dewPoint":39.67,"humidity":0.62,"pressure":1021.16,"windSpeed":10.02,"windGust":33.08,"windGustTime":1552460400,"windBearing":302,"cloudCover":0,"uvIndex":6,"uvIndexTime":1552507200,"visibility":10,"ozone":328.08,"temperatureMin":48.3,"temperatureMinTime":1552485600,"temperatureMax":58.59,"temperatureMaxTime":1552518000,"apparentTemperatureMin":43.5,"apparentTemperatureMinTime":1552485600,"apparentTemperatureMax":58.59,"apparentTemperatureMaxTime":1552518000}]},"flags":{"sources":["nearest-precip","nwspa","cmc","gfs","hrrr","icon","isd","madis","nam","sref","darksky"],"nearest-station":1.839,"units":"us"},"offset":-8}
	`)
)

func TestDarkskyUnmarshal(t *testing.T) {
	var res Response

	if err := json.Unmarshal(exampleJSON, &res); err != nil {
		t.Error(err)
		return
	}

	if res.Lattitude != 37.8267 {
		t.Errorf("latitude is not correct")
	}

	cur := time.Time(res.Currently.Time)
	if cur.Unix() != 1551886726 {
		t.Errorf("time is not correct")
	}

	if res.Hourly.Data[0].Icon != "rain" {
		t.Errorf("first hour should be \"rain\"")
	}
}

func TestDarkskyMarshal(t *testing.T) {
	res := Response{
		Lattitude: 37.8267,
		Longitude: -122.4233,
		Timezone:  "America/Los_Angeles",
		Currently: Data{
			Time:                 Time(time.Unix(1551886726, 0)),
			Summary:              "Mostly Cloudy",
			Icon:                 "partly-cloudy-day",
			NearestStormDistance: 0,
			PrecipIntensity:      0,
			PrecipProbability:    0,
			Temperature:          55.09,
			ApparentTemperature:  55.09,
			DewPoint:             50.97,
			Humidity:             0.86,
			Pressure:             1003.16,
			WindSpeed:            10.93,
			WindGust:             18.43,
			WindBearing:          205,
			CloudCover:           0.79,
			UVIndex:              0,
			Visibility:           6.9,
			Ozone:                353.42,
		},
		Hourly: DataSummary{
			Summary: "Mostly cloudy throughout the day and breezy until this afternoon.",
			Icon:    "wind",
			Data: []Data{
				Data{
					Time:                Time(time.Unix(1551884400, 0)),
					Summary:             "Rain",
					Icon:                "rain",
					PrecipIntensity:     0.0583,
					PrecipProbability:   0.98,
					PrecipType:          "rain",
					Temperature:         54.92,
					ApparentTemperature: 54.92,
					DewPoint:            51.07,
					Humidity:            0.87,
					Pressure:            1002.53,
					WindSpeed:           10.72,
					WindGust:            18.81,
					WindBearing:         202,
					CloudCover:          0.83,
					UVIndex:             0,
					Visibility:          6.22,
					Ozone:               354.65,
				},
			},
		},
		Flags: Flags{
			Sources: []string{
				"nearest-precip",
				"nwspa",
				"cmc",
				"gfs",
				"hrrr",
				"icon",
				"isd",
				"madis",
				"nam",
				"sref",
				"darksky",
			},
			NearestStation: 1.839,
			Units:          "us",
		},
	}

	if b, err := json.Marshal(res); err != nil {
		t.Error(err)
	} else if string(b) != `{"latitude":37.8267,"longitude":-122.4233,"timezone":"America/Los_Angeles","currently":{"time":1551886726,"summary":"Mostly Cloudy","icon":"partly-cloudy-day","nearestStormDistance":0,"precipIntensity":0,"precipProbability":0,"temperature":55.09,"apparentTemperature":55.09,"dewPoint":50.97,"humidity":0.86,"pressure":1003.16,"windSpeed":10.93,"windGust":18.43,"windBearing":205,"cloudCover":0.79,"uvIndex":0,"visibility":6.9,"ozone":353.42},"minutely":{"summary":"","icon":"","data":null},"hourly":{"summary":"Mostly cloudy throughout the day and breezy until this afternoon.","icon":"wind","data":[{"time":1551884400,"summary":"Rain","icon":"rain","nearestStormDistance":0,"precipIntensity":0.0583,"precipProbability":0.98,"precipType":"rain","temperature":54.92,"apparentTemperature":54.92,"dewPoint":51.07,"humidity":0.87,"pressure":1002.53,"windSpeed":10.72,"windGust":18.81,"windBearing":202,"cloudCover":0.83,"uvIndex":0,"visibility":6.22,"ozone":354.65}]},"daily":{"summary":"","icon":"","data":null},"flags":{"sources":["nearest-precip","nwspa","cmc","gfs","hrrr","icon","isd","madis","nam","sref","darksky"],"nearest-station":1.839,"units":"us"},"offset":0}` {
		t.Errorf("not marshaled properly")
	}
}
